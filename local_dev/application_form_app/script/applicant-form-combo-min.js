const updateLocalJson=function(e){switch(e){case"status-select":updateStatusJson(),printStudenForm();break;case"student-info-select":updateStudentInfoJson(),getSchoolCountryList();break;case"study-program-select":updateProgramJson();break;case"accommodation-select":updateAccommodationJson(),printAdditionalForm();break;case"additional-select":updateAdditionalJson(),printApplicationSummary();break;case"submit-select":$(".denote-container").hide(),$(".fixed-side-menu").hide(),deleteCookie("form-obj");break}},printApplicationSummary=function(){let e=$("input[name=program_school]:checked").attr("data-school"),a=$("input[name=program_country]").val(),t=$("#form-student").serializeArray(),o=$("#study-form").serializeArray(),r=$("#accommodation-form").serializeArray(),n=$("#additional-form").serializeArray(),i=[],l=[],s=[],d=[],p=[],m=[],u=[],c=[],f=[],h="",g="",y="",v="",b="",_="",k="";for(let e=0;e<t.length;e++)for(let a=0;a<studentInfoArray.length;a++)t[e].name==studentInfoArray[a].inputName&&i.push({name:t[e].name,label:studentInfoArray[a].inputLabel,value:t[e].value});for(let e=0;e<i.length;e++)h+='<tr><td><span class="bold">'+i[e].label+'</span></td><td><span class="value-input">'+i[e].value+"</span></td></tr>";$(".peronal-info-summary-container").html('<table class="application-summary-tbl">'+h+"</table>");for(let e=0;e<o.length;e++)if(o[e].name.includes("dependent"))for(let a=0;a<dependentInputArray.length;a++)splitName=o[e].name.split("_iterate_"),iterateVal=splitName[1],splitName[0]==dependentInputArray[a].inputName&&c.push({iterate:iterateVal,name:splitName[0],value:o[e].value,label:dependentInputArray[a].inputLabel});else for(let a=0;a<programInfoArray.length;a++)o[e].name==programInfoArray[a].inputName&&(valueStr=o[e].name.includes("program_is_coop_")?1==o[e].value?"Co-Op":0==o[e].value?"Academic":o[e].value:1==o[e].value?"Yes":0==o[e].value?"No":o[e].value,"primary"==programInfoArray[a].inputAssign?l.push({name:o[e].name,label:programInfoArray[a].inputLabel,value:valueStr}):s.push({name:o[e].name,label:programInfoArray[a].inputLabel,value:valueStr}));for(let e=0;e<l.length;e++)g+='<tr><td><span class="bold">'+l[e].label+'</span></td><td><span class="value-input">'+l[e].value+"</span></td></tr>";if($(".study-info-primary-summary-container").html('<table class="application-summary-tbl">'+g+"</table>"),s.length>0){for(let e=0;e<s.length;e++)y+='<tr><td><span class="bold">'+s[e].label+'</span></td><td><span class="value-input">'+s[e].value+"</span></td></tr>";$(".study-info-alternate-summary-container").html('<div class="study-box-container"><h4>+Greystone College</h4><table class="application-summary-tbl">'+y+"</table></div>")}for(let e=0;e<r.length;e++)if(r[e].name.includes("homestay")||r[e].name.includes("residence"))for(let t=0;t<accommodationAdditionalArray.length;t++)accommodationAdditionalArray[t].countryDependence.includes(a)&&r[e].name==accommodationAdditionalArray[t].inputName&&p.push({name:r[e].name,label:accommodationAdditionalArray[t].inputLabel,value:r[e].value});else for(let t=0;t<accommodationInfoArray.length;t++)accommodationInfoArray[t].countryDependence.includes(a)&&r[e].name==accommodationInfoArray[t].inputName&&d.push({name:r[e].name,label:accommodationInfoArray[t].inputLabel,value:r[e].value});if(d.length>0){for(let e=0;e<d.length;e++)valueStr=1==d[e].value?"Yes":0==d[e].value?"No":d[e].value,v+='<tr><td><span class="bold">'+d[e].label+'</span></td><td><span class="value-input">'+valueStr+"</span></td></tr>";if(v='<table class="application-summary-tbl">'+v+"</table>",p.length>0){for(let e=0;e<p.length;e++)b+='<tr><td><span class="bold">'+p[e].label+'</span></td><td><span class="value-input">'+p[e].value+"</span></td></tr>";b='<h5>Additional Details</h5><table class="application-summary-tbl">'+b+"</table>"}$(".accommodation-info-summary-container").html(v+b),"Online"==a?$(".accommodation-info-summary-container").addClass("study-hide").removeClass("study-show"):$(".accommodation-info-summary-container").addClass("study-show").removeClass("study-hide")}else $(".accommodation-info-summary-container").addClass("study-hide").removeClass("study-show");for(let e=0;e<n.length;e++)if(n[e].name.includes("additional_family"))for(let a=0;a<familyMemberInfoArray.length;a++)splitName=n[e].name.split("_iterate_"),iterateVal=splitName[1],splitName[0]==familyMemberInfoArray[a].inputName&&f.push({iterate:iterateVal,name:splitName[0],value:n[e].value,label:familyMemberInfoArray[a].inputLabel});else if(n[e].name.includes("file")?objUnique=fileUploadArray.reduce(((e,a)=>(e.find((({inputName:e})=>a.inputName===e))||e.push(a),e)),[]):objUnique=additionalInfoArray.reduce(((e,a)=>(e.find((({inputName:e})=>a.inputName===e))||e.push(a),e)),[]),n[e].name.includes("file"))for(let a=0;a<objUnique.length;a++)n[e].name==objUnique[a].inputName&&(valueStr=1==n[e].value?"Yes":0==n[e].value?"No":n[e].value,u.push({name:n[e].name,label:objUnique[a].inputLabel,value:valueStr}));else for(let a=0;a<objUnique.length;a++)n[e].name==objUnique[a].inputName&&(valueStr=1==n[e].value?"Yes":0==n[e].value?"No":n[e].value,m.push({name:n[e].name,label:objUnique[a].inputLabel,value:valueStr}));for(let e=0;e<m.length;e++)valueStr=1==m[e].value?"Yes":0==m[e].value?"No":m[e].value,_=_+'<tr><td><span class="bold">'+m[e].label+'</span></td><td><span class="value-input">'+valueStr+"</span></td></tr>";if(_='<table class="application-summary-tbl">'+_+"</table>",u.length>0){for(let e=0;e<u.length;e++)k+='<tr><td><span class="bold">'+u[e].label+'</span></td><td><span class="value-input">'+u[e].value+"</span></td></tr>";k='<h5>File Uploads</h5><table class="application-summary-tbl">'+k+"</table>"}if($(".additional-info-summary-container").html(_+k),c.length>0){groupedDependent=groupBy(c,"iterate"),groupArray=new Object,groupArray=groupedDependent,values=Object.values(groupArray),$(".study-info-dependent-summary-container").empty();for(let e=0;e<values.length;e++){pgDependentLabelHtml="";for(let a=0;a<values[e].length;a++)pgDependentLabelHtml+='<tr><td><span class="bold">'+values[e][a].label+'</span></td><td><span class="value-input">'+values[e][a].value+"</span></td></tr>";headerLabel=0==e?"<h5>Dependent Family Members</h5>":"",$(".study-info-dependent-summary-container").append(headerLabel+"<table>"+pgDependentLabelHtml+"</table>")}}if(f.length>0){groupedDependent=groupBy(f,"iterate"),groupArray=new Object,groupArray=groupedDependent,values=Object.values(groupArray),$(".additional-info-family-summary-container").empty();for(let e=0;e<values.length;e++){addFamilyLabelHtml="";for(let a=0;a<values[e].length;a++)addFamilyLabelHtml+='<tr><td><span class="bold">'+values[e][a].label+'</span></td><td><span class="value-input">'+values[e][a].value+"</span></td></tr>";headerLabel=0==e?"<h5>Family Members</h5>":"",$(".additional-info-family-summary-container").append(headerLabel+"<table>"+addFamilyLabelHtml+"</table>")}}policyLink="ELS"==e?"https://www.els.edu/terms-of-use":"Greystone College"==e?"Canada"==a?"https://www.ilsc.com/greystone-college/canada/policies":"https://www.ilsc.com/greystone-college/australia/policies":"https://www.ilsc.com/language-schools/policies-procedures",accommLink="ELS"==e?"https://assets.contentstack.io/v3/assets/blte6ca0397941e65d8/blt4eddec62c8d065d4/6298de59c040564c4585393f/ELS_Cancellation_Policy.pdf":"https://www.accommodations.ilsc.com/accommodation-booking-policy",contractLink="Australia"==a?"https://www.ilsc.com/hubfs/pdf/applications-pricelists/student-contract-australia-terms-conditions.pdf":"Canada"==a?"https://www.ilsc.com/hubfs/pdf/applications-pricelists/student-contract-canada-terms-conditions.pdf":"India"==a?"https://www.ilsc.com/hubfs/pdf/applications-pricelists/student-contract-india-terms-conditions.pdf":"https://www.ilsc.com/hubfs/pdf/applications-pricelists/student-contract-canada-terms-conditions.pdf",privacyLink="ELS"==e?"https://www.els.edu/privacy-policy":"",tuitionLink="ELS"==e?"https://www.els.edu/admissions/tuition-fees":"",cancelLink="ELS"==e?"https://assets.contentstack.io/v3/assets/blte6ca0397941e65d8/blt4eddec62c8d065d4/6298de59c040564c4585393f/ELS_Cancellation_Policy.pdf":"",policyHtml="ELS"==e?'By submitting this form by clicking the confirmation button below, you acknowledge that you have read and agreed to the <a href="'+policyLink+'" target="_blank">Terms of Use</a>, <a href="'+privacyLink+'" target="_blank">Privacy Policy</a>, <a href="'+cancelLink+'" target="_blank">Cancellation & Refund Policy</a> and <a href="'+tuitionLink+'" target="_blank">Prices & Dates addendum</a>.':'To finalize your application, you must acknowledge that you have read and agreed to the policies and procedures that apply to your chosen study country, and, if applicable, the Accommodation Policy. You can download the policies and procedures from the following link, sign it, and attach your signed copy here now using the file attachment link, or you may send it by email later. <a href="'+contractLink+'" target="_blank" download>Download</a>',$(".submit-policy-container").html(policyHtml),$(".step-breadcrumb-container").hide(),"ELS"!=e&&printContractFileInput()},printContractFileInput=function(){let e="submit-policy-file-container";$("."+e).is(":empty")&&printFilesForm(fileUploadArray,!1,"Summary",e),printHubSpotContractFile()},printHubSpotContractFile=function(){hbspt.forms.create({region:"na1",portalId:"5020112",formId:contractUploadFormId,target:"#contract-hs-file-form"})},printPersonForm=function(e,a,t,o,r){let n=e.filter((e=>e.category==t)),i=$(".date-picker").length,l=r?"_iterate_"+r:"",s=new Date($("select[name=program_startdate_primary-input] option:checked").val()),d=new Date($("input[name=student_dob]").val()).getTime(),p=calculate_age(d,s.getTime()),m=$(".study-information-form.dropdown-container button.country-select").attr("data-selected"),u=schoolVal,c=$("input[name=online_applicant_status]:checked").val();for(let e in n){let r,s,d,f,h,g,y="",v="",b=!0;if(r=n[e].inputName,d=_.camelCase(r),value=n[e].value,helpTxt=n[e].helpText?'<sup><i class="fas fa-info-circle" data-container="body" data-trigger="hover" data-toggle="popover" data-placement="right" data-content="'+n[e].helpText+'"></i></sup>':"",requiredValue=n[e].requiredDependence?n[e].requiredDependence.includes(schoolVal)?"required":"":1==n[e].required?"required":"",s="required"==requiredValue?n[e].inputLabel+"<sup>*</sup>":n[e].inputLabel,disabledVal="",n[e].countryDependence&&(n[e].countryDependence.includes(m)||(b=!1)),n[e].ageMax&&n[e].ageMax<p&&(b=!1),n[e].displayShow||(b=!1),n[e].disabled&&(disabledVal=n[e].disabled?"disabled":""),n[e].applicationRestriction&&(ar=n[e].applicationRestriction.split(",")),n[e].schoolParentDependence&&(n[e].schoolParentDependence.includes(u)||(b=!1)),applicationStatus=!n[e].applicationRestriction||-1==ar.indexOf(c),applicationStatus&&b&&!a&&n[e].category==t){switch(n[e].inputType){case"text":h="<input type='text' class='form-control' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"' "+disabledVal+" value='"+value+"'>";break;case"text-area":v="full-width",h="<textarea class='form-control' rows='"+n[e].rows+"' cols='60' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"'  "+disabledVal+"></textarea>";break;case"phone":h="<input type='tel' class='form-control' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"' placeholder='example: +1 123 123 12345' value='"+value+"'  "+disabledVal+">";break;case"email":h="<input type='email' class='form-control' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"' value='"+value+"'  "+disabledVal+">";break;case"dropdown":if(n[e].obj)for(let a in n[e].obj)optionValue=n[e].obj[a],y+="<option value='"+optionValue+"'>"+optionValue+"</option>";h="<select class='form-control' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"' "+disabledVal+"><option disabled selected value=''>Choose "+n[e].inputLabel+"</option>"+y+"</select>";break;case"date-time":h="<input type='text' value='"+value+"' class='form-control date-picker' id='"+t+"-datePicker-"+i+l+"' name='"+r+l+"' "+requiredValue+" placeholder='YYYY-MM-DD' data-category='"+t+"'  "+disabledVal+" onkeydown='event.preventDefault()'>";break;case"checkbox":preHtml="",postHtml="",preContainerHtml="",postContainerHtml="",n[e].preHtml&&(preHtml=n[e].preHtml,preContainerHtml='<div class="checkbox-container study-box-container">'),n[e].postHtml&&(postHtml=n[e].postHtml,postContainerHtml="</div>"),h=preContainerHtml+preHtml+"<div class='checkbox-line'><input type='checkbox' value='"+value+"' class='form-control' id='"+d+l+"' name='"+r+l+"' "+requiredValue+" data-category='"+t+"' "+disabledVal+"><label for="+d+l+">"+s+helpTxt+"</label></div>"+postHtml+postContainerHtml;break;case"radio-option":if(n[e].obj)for(let a in n[e].obj)if(optionValue=n[e].obj[a].optionValue,optionLabel=n[e].obj[a].optionLabel,otherClass="option-other"==n[e].obj[a].optionType||"option-add"==n[e].obj[a].optionType||"option-multi"==n[e].obj[a].optionType?"other-input":"indenpendent-input",y+='<div class="form-check" data-category="'+t+'" ><input class="form-check-input '+otherClass+'" type="radio" name="'+r+l+'" id="'+d+"Radio"+a+l+'" value="'+optionValue+'" '+requiredValue+" "+disabledVal+'><label class="form-check-label" for="'+d+"Radio"+a+'">'+optionLabel+"</label></div>","option-other"==n[e].obj[a].optionType&&(depClass=n[e].obj[a].dependentClass?"dependent-target study-hide":"",depTarget=n[e].obj[a].dependentClass?n[e].obj[a].dependentClass:"",y+="<input type='text' class='"+depClass+"' data-target='"+depTarget+"' name='"+n[e].obj[a].optionName+l+"' placeholder='"+n[e].obj[a].placeholder+"' "+disabledVal+">"),"option-add"==n[e].obj[a].optionType&&(y+='<div class="btn-container dependent-target study-hide"><div id="'+n[e].obj[a].addClass+'" class="btn btn-orange-outline">'+n[e].obj[a].buttonLabel+'</div></div><div class="'+n[e].obj[a].addClass+'-container"></div>'),"option-multi"==n[e].obj[a].optionType){r=n[e].obj[a].optionMultiObj[0].inputName,d=_.camelCase(r),requiredValue=1==n[e].obj[a].optionMultiObj[0].required?"required":"",dependentLabel=n[e].obj[a].optionMultiObj[0].inputLabel,y+='<legend class="dependent-target study-hide">'+dependentLabel+"</legend>";for(let o=0;o<n[e].obj[a].optionMultiObj[0].obj.length;o++)optionValue=n[e].obj[a].optionMultiObj[0].obj[o].optionValue,optionLabel=n[e].obj[a].optionMultiObj[0].obj[o].optionLabel,otherClass="option-other"==n[e].obj[a].optionMultiObj[0].obj[o].optionType?"other-input":"indenpendent-input",y+='<div class="form-check multi-target dependent-target study-hide" data-category="'+t+'" ><input class="form-check-input '+otherClass+'" type="radio" name="'+r+l+'" id="'+d+"Radio"+o+l+'" value="'+optionValue+'" '+requiredValue+" "+disabledVal+'><label class="form-check-label" for="'+d+"Radio"+o+'">'+optionLabel+"</label></div>","option-other"==n[e].obj[a].optionMultiObj[0].obj[o].optionType&&(depClass=n[e].obj[a].optionMultiObj[0].obj[o].dependentClass?"dependent-target study-hide":"",depTarget=n[e].obj[a].optionMultiObj[0].obj[o].dependentClass?n[e].obj[a].optionMultiObj[0].obj[o].dependentClass:"",y+="<input type='text' class='"+depClass+"' data-target='"+depTarget+"' name='"+n[e].obj[a].optionMultiObj[0].obj[o].optionName+l+"' placeholder='"+n[e].obj[a].optionMultiObj[0].obj[o].placeholder+"' "+disabledVal+">")}h=y;break}f="radio-option"==n[e].inputType?"<legend>"+s+helpTxt+"</legend>":"checkbox"==n[e].inputType?"":"<label for="+d+l+">"+s+helpTxt+"</label>",validationForm="<div class='valid-feedback'></div>",h&&(g=f+h+validationForm),g&&(n[e].hidden?hideForm=n[e].hidden?"study-hide":"study-show":hideForm="study-show",$("."+o).append("<div class='form-group "+v+" "+hideForm+"'>"+g+"</div>"))}}$((function(){$(".date-picker").each((function(){$(this).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-70:+00",onSelect:function(e){dateObj=new Date(e),$(this).attr("data-value",dateObj.getTime())}})}))}))},printStudenForm=function(){let e=localStorage.getItem(formJsonName),a=JSON.parse(e),t=a.application_status,o=a.agency_form_array[0].student_info_form_enabled,r=a.agency_form_array[0].agency_form_enabled,n=a.advisor_form_array[0].advisor_form_enabled,i="Student",l="student-information-form",s="agent-information-form",d="advisor-information-form";"Agent"==t?($("."+d).empty(),$("."+s).is(":empty")&&printPersonForm(studentInfoArray,r,"Agent",s),$("."+l).is(":empty")&&printPersonForm(studentInfoArray,o,i,l),$("form#form-advisor").removeClass("form-show").addClass("form-hide"),$("form#form-agent,form#form-student").removeClass("form-hide").addClass("form-show")):"Walk-in Student Advisor"==t?($("."+s).empty(),$("."+d).is(":empty")&&printPersonForm(studentInfoArray,n,"Advisor",d),$("."+l).is(":empty")&&printPersonForm(studentInfoArray,o,i,l),$("form#form-agent").removeClass("form-show").addClass("form-hide"),$("form#form-advisor,form#form-student").removeClass("form-hide").addClass("form-show")):"Student"==t&&($("."+s).empty(),$("."+d).empty(),$("."+l).is(":empty")&&printPersonForm(studentInfoArray,o,i,l),$("form#form-student").removeClass("form-hide").addClass("form-show"),$("form#form-agent").removeClass("form-show").addClass("form-hide"),$("form#form-advisor").removeClass("form-show").addClass("form-hide")),$("#studentAddressCountry").change((function(){"Australia"==this.value?$("#studentVisaTypeNumber").parent().removeClass("form-hide").addClass("form-show"):$("#studentVisaTypeNumber").parent().removeClass("form-show").addClass("form-hide")}))},updateStudentInfoJson=function(){let e=localStorage.getItem(formJsonName),a=JSON.parse(e),t=[],o=[];$("form#form-agent").serializeArray().forEach((function(e){t.push({name:e.name,value:e.value})})),t.length>0&&(a.agency_form_array[0].agency_form_enabled=!0);for(let e=0;e<t.length;e++)a.agency_form_array[0][t[e].name]=t[e].value;$("form#form-student").serializeArray().forEach((function(e){o.push({name:e.name,value:e.value})})),o.length>0&&(a.student_info_form_array[0].student_form_enabled=!0);for(let e=0;e<o.length;e++)a.student_info_form_array[0][o[e].name]=o[e].value;localStorage.setItem(formJsonName,JSON.stringify(a))},updateProgramJson=function(){let e=localStorage.getItem(formJsonName),a=JSON.parse(e),t=[];dependentArray=[];for(let e=0;e<6;e++)a.program_form_array[0].program_additional_info[0].visa_form_dependent[e]={};localStorage.setItem(formJsonName,JSON.stringify(a));let o=localStorage.getItem(formJsonName),r=JSON.parse(o);$("form#study-form").serializeArray().forEach((function(e){t.push({name:e.name,value:e.value})})),t.length>0&&(r.program_form_array[0].program_form_enabled=!0);for(let e=0;e<t.length;e++)keyValue=t[e].name,val=t[e].value,1==t[e].value?val="Yes":0==t[e].value&&(val="No"),keyValue.includes("dependent")?(splitName=t[e].name.split("_iterate_"),iterateVal=splitName[1],dependentArray.push({iterate:iterateVal,name:splitName[0],value:val})):keyValue.includes("alternate-input")?keyValue.includes("additional")?r.program_form_array[0].program_alternate_array[0].program_additional_info[0][t[e].name.replace("_alternate-input","")]=val:r.program_form_array[0].program_alternate_array[0][t[e].name.replace("_alternate-input","")]=val:keyValue.includes("additional")?r.program_form_array[0].program_additional_info[0][t[e].name.replace("_primary-input","")]=val:r.program_form_array[0][t[e].name.replace("_primary-input","")]=val;if(dependentArray.length>0){groupedDependent=groupBy(dependentArray,"iterate"),groupArray=new Object,groupArray=groupedDependent,values=Object.values(groupArray);for(let e=0;e<values.length;e++)for(let a=0;a<values[e].length;a++)r.program_form_array[0].program_additional_info[0].visa_form_dependent[e][values[e][a].name]=values[e][a].value}localStorage.setItem(formJsonName,JSON.stringify(r)),deleteCookie("program-obj")},updateAccommodationJson=function(){let e=localStorage.getItem(formJsonName),a=JSON.parse(e),t=[];$("form#accommodation-form").serializeArray().forEach((function(e){t.push({name:e.name,value:e.value})})),t.length>0&&(a.accommodation_form_array[0].accommodation_form_enabled=!0);for(let e=0;e<t.length;e++)a.accommodation_form_array[0][t[e].name]=t[e].value;localStorage.setItem(formJsonName,JSON.stringify(a)),deleteCookie("accom-type-obj")},getSchoolCountryList=function(){let e=".study-information-form.dropdown-container ul.drop-country",a=schoolCountryListTable,t="ELS"==schoolVal?"&country__eq=USA":"&country__neq=USA",o="https://api.hubapi.com/hubdb/api/v2/tables/"+a+"/rows?portalId="+portalId+(t+"&location_type__in=Country,Online&enable__eq=1");o=encodeURI(o),0==$(e+" li").length&&$.get(o).done((function(a){let t=a.objects;if($(e).append('<li class="disabled">Choose your Country</li>'),t.length>0){for(let a=0;a<t.length;a++)countryValue=t[a].values[1],listHtml="<li class='dropdown-item' data-value='"+countryValue+"' tranlsate='no'>"+countryValue+"</li>",$(e).append(listHtml);printDropSelect(".country-dropdown"),$(".study-information-form.dropdown-container ul.drop-country li.dropdown-item").click((function(){$(".study-information-form .study-box-container:not(.country-select-container)").addClass("disabled"),$(".study-information-form .input-container").removeClass("study-show").addClass("study-hide"),selectedValue=$(this).attr("data-value"),$("input[name=program_country]").val(selectedValue).trigger("change"),printSchoolSelection(selectedValue)})),enableCountryBtn()}else listHtml="No Country Available at this time.",$("#.study-information-form.dropdown-container .btn.country-select span.selected-text").text(listHtml)})).fail((function(){listHtml="No Country Available at this time.",$("#.study-information-form.dropdown-container .btn.country-select span.selected-text").text(listHtml)}))},resetInsuranceOption=function(){$("#insurance-option-container").empty()},resetSchoolProgram=function(){$(".study-program-selection.study-box-container").addClass("disabled"),$(".study-program-selection .additional-input-container,.study-program-selection .input-container,.additional-notes-container,.accommodation-airport-transfer-details,.accommodation-details,.accommodation-homestay-details").removeClass("study-show").addClass("study-hide"),$(".additional-program-form").empty(),$(".additional-notes-container .additional-notes-input").empty(),$(".week-input").empty(),$('input[name*="program_weeks"]').attr("disabled",!0).val(""),$(".additional-files-container").empty(),$(".airport-transfer-details").empty(),$("#accommodation-type-option-container").empty(),$(".homestay-details").empty(),$("input[name=accommodation_option]").prop("checked",!1),!$(".accommodation-details").is(":empty")&&$("input[name=program_campus]").is(":checked")&&printAccomLocationOption()},resetCampusProgram=function(){$(".study-program-selection .additional-input-container,.study-program-selection .input-container,.additional-notes-container").removeClass("study-show").addClass("study-hide"),$("input[name=program_is_coop_primary-input]").prop("checked",!1),$(".additional-notes-container .additional-notes-input").empty()},resetProgramFormField=function(e,a,t,o){let r=returnComboVal(o);"primary-input"==e&&$("#study-program-"+r+" .study-program-alternate").removeClass("study-show").addClass("study-hide"),a&&($(a,"#study-program-"+r).removeClass("study-show").addClass("study-hide"),$(a+" input,select","#study-program-"+r).attr("disabled",!0)),t&&$(t).empty(),1==r&&($(".additional-notes-container").removeClass("study-show").addClass("study-hide"),$(".additional-notes-container .additional-notes-input").empty(),$(".additional-files-container").empty()),$("#study-program-"+r+"a.add-program-link").remove(),resetLaSalleOption(e,o)},resetAccommodationDetails=function(){$("input[name=accommodation_type]").prop("checked",!1),$(".form-group.accommodation-details").removeClass("study-show").addClass("study-hide"),$(".form-group.accommodation-details input").attr("disabled",!0),$(".accommodation-homestay-details").removeClass("study-show").addClass("study-hide"),$(".accommodation-homestay-details input").attr("disabled",!0)},resetAdditionalFiles=function(){$(".additional-files-container").empty()},printWeeksOption=function(e,a,t){let o=returnComboVal(t),r=e,n="";if(r.length>0){for(let e=0;e<r.length;e++)n+='<div class="form-check"><label class="form-check-label" for="program-weeks-'+r[e].program_id+'">'+r[e].program_length+" weeks</label></div>";$("#study-program-"+o+".study-program-selection .input-container.schedule-input."+a+" .week-input").html("<label>Number of Weeks</label>"+n)}},printAlternateOption=function(){optionHtml='<label>Are you also applying for Greystone College programs?</label><div class="form-check"><input class="form-check-input" value="0" type="radio" name="is_alternate_apply" id="no-alternate" required checked><label class="form-check-label" for="no-alternate">No</label></div><div class="form-check"><input class="form-check-input" value="1" type="radio" name="is_alternate_apply" id="yes-alternate"><label class="form-check-label" for="yes-alternate">Yes</label></div>',className=".study-program-selection .input-container.alternate-initial .study-program-alternate-option",$(className).is(":empty")&&$(className).html(optionHtml),$(".study-program-selection .input-container.alternate-initial").removeClass("study-hide").addClass("study-show")},printScheduleOption=function(e,a,t){let o=returnComboVal(t),r=returnComboName(t),n=e,i=$(".study-program-dropdown ."+a+" select option:selected").attr("data-id"),l=$(".study-program-dropdown ."+a+" select option:selected").attr("data-min-age"),s=$(".study-program-dropdown ."+a+" select option:selected").attr("data-max-age"),d="";if(singleOptionChek=1==n.length?"checked":"",l=l||0,s=s||99,n.length>0){for(let e=0;e<n.length;e++)lasalleVar=n[e].laSalleEligible?n[e].laSalleEligible:"",d+='<div class="form-check"><input class="form-check-input '+a+'" value="'+n[e].program_schedule+'" type="radio" name="program_schedule_'+a+r+'" data-weeks="'+n[e].program_length+'" data-parent-id="'+n[e].parent_program_id+'" id="'+n[e].program_id+'" data-lasalle-eligible="'+lasalleVar+'" '+singleOptionChek+' required><label class="form-check-label" for="'+n[e].program_id+'">'+n[e].program_schedule+"</label></div>";$("#study-program-"+o+".study-program-selection .input-container.schedule-input."+a+" .time-input").html("<label>Choose Schedule</label>"+d),$("#study-program-"+o+".study-program-selection.study-box-container .input-container.schedule-input."+a).removeClass("study-hide").addClass("study-show"),printWeeksOption(n,a,t),1==n.length&&($("input[name=program_weeks_"+a+r).val(n[0].program_length).attr("disabled",!1),printStartDates(n[0].program_id,a,l,s,t))}else $("#study-program-"+o+".study-program-selection .input-container.schedule-input .time-input,.study-program-selection .input-container.schedule-input."+a+" .week-input").empty(),printStartDates(i,a,l,s,t)},printProgramOption=function(e,a,t,o,r){let n=returnComboVal(r),i=returnComboName(r),l=$("input[name=program_campus]:checked").attr("id"),s=($("input[name=program_school]:checked").attr("data-school"),"https://api.hubapi.com/hubdb/api/v2/tables/"+programLSListTable+"/rows?portalId="+portalId+("&campus_location__in="+l+"&programs_available__in="+e+"&is_program_price__eq=1&enable__eq=1&orderBy=category")),d=[],p="";s=encodeURI(s),$.ajax({url:s,type:"get",async:!1,success:function(l){let s=l.objects;for(let e=0;e<s.length;e++)scheduleName=s[e].values[3].name,d.push({program_id:s[e].id,schedule_name:s[e].values[3].name,item_name:s[e].values[4],schedule_id:scheduleName.replace(/\s/g,""),group_id:s[e].values[13][0].id,campus_country:s[e].values[26].name});let m=groupBy(d,"group_id"),u=new Object;u=m;Object.keys(u);let c=[],f=Object.values(u);for(let e=0;e<f.length;e++)for(let a=0;a<f[e].length;a++)0==a&&c.push({program_id:f[e][a].program_id,campus_country:f[e][a].campus_country,group_id:f[e][a].group_id,item_name:f[e][a].item_name,schedule_id:f[e][a].schedule_id,schedule_name:f[e][a].schedule_name});if(singleOptionChek=1==c.length?"checked":"",c.length>0){for(let e=0;e<c.length;e++)p+='<div class="form-check"><input class="form-check-input '+a+'" value="'+c[e].schedule_name+"-"+c[e].item_name+'" type="radio" name="program_option_'+a+i+'"  data-parent-id="'+c[e].group_id+'" id="'+c[e].program_id+'" '+singleOptionChek+' required><label class="form-check-label" for="'+c[e].program_id+'">'+c[e].schedule_name+"-"+c[e].item_name+"</label></div>";$("#study-program-"+n+".study-program-selection .input-container.program-option-input."+a+" .program-schedule-input").html("<label>Choose Program Option</label>"+p),$("#study-program-"+n+".study-program-selection.study-box-container .input-container.program-option-input."+a).removeClass("study-hide").addClass("study-show")}1==c.length&&printStartDates(e,a,t,o,r)}})},printLaSalleOption=function(e,a){let t=returnComboVal(a),o=returnComboName(a);isLasalleOptionHtml="<label>Are you also applying for LaSalle partnership program?</label><div class='form-check'><input class='form-check-input "+e+"' value='No' type='radio' name='option_lasalle_parthership_"+e+o+"' id='no-'"+e+"'><label class='form-check-label' for='no-"+e+"'>No</label></div><div class='form-check'><input class='form-check-input "+e+"' value='Yes' type='radio' name='option_lasalle_parthership_"+e+o+"' id='yes-'"+e+"'><label class='form-check-label' for='yes-"+e+"'>Yes</label></div>",birthOptionHtml="<div class='partner-info study-hide'><div class='form-group'><label for='partner-birth-city-"+e+"'>Enter City of Birth<sup>*</sup></label><input class='form-control' id='partner-birth-city-"+e+"' type='text' name='student_city_birth_"+e+o+"' disabled required></div><div class='form-group'><label for='partner-birth-state-"+e+"'>Enter Province/State of Birth<sup>*</sup></label><input class='form-control' type='text' id='partner-birth-state-"+e+"' name='student_prov_state_birth_"+e+o+"' disabled required></div></div>",$("#study-program-"+t+".study-program-selection .partner-input."+e+" .partner-option-input").html(isLasalleOptionHtml+birthOptionHtml),$("#study-program-"+t+".study-program-selection .partner-input."+e).removeClass("study-hide").addClass("study-show")},printStartDates=function(e,a,t,o,r){let n=returnComboVal(r),i=returnComboName(r),l=$("input[name=program_campus]:checked").attr("id"),s=$("input[name=program_school]:checked").attr("data-school"),d=$("input[name=program_country]").val(),p=$("input[name=program_option_primary-input]:checked").val(),m=new Date($("input[name=student_dob]").val()).getTime(),u="";if("Language School"==s?tableId=startDateTableLS:"Greystone College"==s?tableId=startDateTableGC:"ELS"==s&&(tableId=startDateTableELS),"alternate-input"==a&&(tableId=startDateTableGC),n>1?(previousDateSelected=$("input[name="+r+"]:checked").parents().eq(5).prev().find('select[name*="program_startdate_"] option:selected').attr("data-value"),previousDurationSelected="Greystone College"==s?parseInt($("input[name="+r+"]:checked").parents().eq(5).prev().find('input[name*="program_weeks_"]').val()):parseInt($("input[name="+r+"]:checked").parents().eq(5).prev().find('select[name*="program_option_duration_"] option:selected').val().slice(0,2))):(previousDateSelected=$("select[name=program_startdate_"+a+i+"] option:selected").attr("data-value"),previousDurationSelected=parseInt($("select[name=program_option_duration_"+a+i+"] option:selected").val().slice(0,2))),primaryStartDate="alternate-input"==a?$('select[name*="program_startdate_primary-input"] option:selected').attr("data-value"):previousDateSelected,primaryDurationInt=previousDurationSelected,primaryDuration=7*primaryDurationInt,u=n>1?parseInt(primaryStartDate)+864e5*primaryDuration:"","undefined"!=typeof tableId){dateQuery=""!=u?"&start_dates__gt="+u:"";let o="&program__in="+e+"&campus__in="+l+dateQuery,r="https://api.hubapi.com/hubdb/api/v2/tables/"+tableId+"/rows?portalId="+portalId+o;r=encodeURI(r),foundNoneHtml="<option disabled selected value=''>No Start Dates Available</option>",$("#study-program-"+n+" .study-program-start-date-dropdown ."+a+" select.form-control").html("<option disabled selected value=''>No Start Dates Available</option>"),$.get(r).done((function(e){let o=e.objects;if(currentDate=new Date,o.sort(((e,a)=>e.values[3]-a.values[3])),o.length>0){optionHtml="<option disabled selected value=''>Choose Start Date</option>",enableOption=!1;for(let e=0;e<o.length;e++)if(dateObj=new Date(o[e].values[3]),dateObjCalc=new Date(o[e].values[3]),dateObjCalcMinor=new Date(o[e].values[3]),epochVal=o[e].values[3],currentDate.getTime()<=epochVal&&(minDob=subtractYears(t,dateObjCalc),minorDob=subtractYears(18,dateObjCalcMinor),m<=minDob)){if(yearVal=dateObj.getUTCFullYear(),monthVal=months[dateObj.getUTCMonth()],monthInt=monthsInt[dateObj.getUTCMonth()],dayVal=dateObj.getUTCDate(),dateTxt=monthVal+" "+dayVal+", "+yearVal,monthInt=monthInt.length<2?"0"+monthInt:monthInt,dayVal=dayVal.toString().length<2?"0"+dayVal.toString():dayVal,dateInt=yearVal+"-"+monthInt+"-"+dayVal,weekAvailableArray=[],o[e].values[5])for(let a=0;a<o[e].values[5].length;a++)weekAvailableArray.push(o[e].values[5][a].name);optionHide="Australia"==d&&"Language School"==s&&(p.includes("Evening")||p.includes("Part Time"))&&m>minorDob?"hidden disabled":"",optionHtml=optionHtml+"<option "+optionHide+" value='"+dateInt+"' data-value='"+o[e].values[3]+"' data-week-available='"+weekAvailableArray.toString()+"'>"+dateTxt+"</option>",enableOption=!0}ageQualifyMessage="<option disabled selected value=''>No Start Dates Available. Possible reason - There is an age requirement for this program. Minimum age:"+t+"</option>",enableOption?($("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.startdate-dropdown").html(optionHtml),$("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.startdate-dropdown").prop("disabled",!1),0==$("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.startdate-dropdown option:not(:disabled)").length&&$("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.form-control").prop("disabled",!1).html(ageQualifyMessage)):$("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.form-control").prop("disabled",!1).html(ageQualifyMessage)}else $("#study-program-"+n+" ."+a+" .study-program-start-date-dropdown select.form-control").prop("disabled",!1).html(foundNoneHtml);$("#study-program-"+n+".study-program-selection.study-box-container .input-container.date-input."+a).removeClass("study-hide").addClass("study-show")})).fail((function(e,t,o){$("#study-program-"+n+" .study-program-start-date-dropdown ."+a+" select.form-control").html("<option disabled selected value=''>Cannot find Start Dates. Try another Program.</option>")}))}},printProgramDuration=function(e,a){let t=returnComboVal(a),o=$("select[name=program_startdate_primary-input] option:selected").attr("data-week-available").split(",");if(className=$("#study-program-"+t+".study-program-selection .program-option-duration-input."+e+" .duration-dropdown select"),optionHtml='<option disabled selected value="">Choose Duration</option>',"primary-input"==e){if(className.empty(),""!=o[0])for(let e=0;e<o.length;e++)weekText="1"==o[e]?"week":"weeks",optionHtml+='<option class="dropdown-item" data-item="'+o[e]+" "+weekText+'" value="'+o[e]+" "+weekText+'">'+o[e]+" "+weekText+"</option>";else for(let e=1;e<53;e++)weekText=1==e?"week":"weeks",optionHtml+='<option class="dropdown-item" data-item="'+e+" "+weekText+'" value="'+e+" "+weekText+'">'+e+" "+weekText+"</a>";$("#study-program-"+t+" .program-option-duration-input.primary-input").removeClass("study-hide").addClass("study-show"),className.html(optionHtml).attr("disabled",!1)}},groupBy=(e,a)=>e.reduce(((e,t)=>((e[t[a]]=e[t[a]]||[]).push(t),e)),{}),printProgram=function(e,a,t){let o=$("input[name=program_school]:checked").attr("data-school"),r=$("input[name=program_country]").val();"Greystone College"==o||t?(initElement=".study-program-selection .additional-input-container."+a+" .additional-program-form",$(initElement).empty(),$(initElement).is(":empty")&&(coopText="52464878081"==e?"Practicum":"Co-Op",academicHtml="52464878081"!=e?'<div class="form-check"><input class="form-check-input '+a+'" value="0" type="radio" name="program_is_coop_'+a+'" id="no-coop" required><label class="form-check-label" for="no-coop">Academic</label></div>':"",coopHtml="Australia"!=r?'<div class="form-check"><input class="form-check-input '+a+'" value="1" type="radio" name="program_is_coop_'+a+'" id="yes-coop"><label class="form-check-label" for="yes-coop">'+coopText+"</label></div>":"",optionHtml="<label>Choose Program Type</label>"+academicHtml+coopHtml,$(initElement).html(optionHtml)),$(".study-program-selection.study-box-container").removeClass("disabled"),$(".study-program-selection .additional-input-container."+a).removeClass("study-hide").addClass("study-show"),t&&($(".study-program-alternate").removeClass("study-hide").addClass("study-show"),$(".alternate-initial").append('<input name="program_school_alternate-input" value="Greystone College" type="hidden">'))):printProgramDrop(e,0,a,"program_is_coop_"+a)},printProgramDrop=function(e,a,t,o){let r=$("input[name=program_school]:checked").attr("id"),n=returnComboVal(o);if(selectedParentSchool=$("input[name=program_school]:checked").attr("data-school"),dropContainerEl="#study-program-"+n+".study-program-selection.study-box-container .input-container.program-input."+t,printDropDownArray=[],programArray=[],isProla=!1,comboName=returnComboName(o),"Language School"==selectedParentSchool?(tableId=programTableLS,campusProp="campus",objNum=2,coopBool="",minAgeObjNum=16,maxAgeObjNum=17):"Greystone College"==selectedParentSchool?(tableId=programTableGC,campusProp="new_campus",objNum=3,coopBool=1==a?"&is_co_op__eq=1":"&is_co_op__eq=0"):"ELS"==selectedParentSchool&&(tableId=programTableELS,campusProp="campus",objNum=2,minAgeObjNum=17,maxAgeObjNum=18,coopBool=""),"alternate-input"==t&&(selectedParentSchool="Greystone College",r="81771084433",tableId=programTableGC,campusProp="new_campus",objNum=3),"undefined"!=typeof campusProp){let a="&"+campusProp+"__in="+e+"&schools__in="+r+"&enable=1"+coopBool+"&show_quote_tool=1&add_on_program=0",o="https://api.hubapi.com/hubdb/api/v2/tables/"+tableId+"/rows?portalId="+portalId+a;o=encodeURI(o),$.get(o).done((function(e){let a=e.objects;if(a.sort(((e,a)=>e.values[objNum]>a.values[objNum]?1:-1)),a.length>0)if("Greystone College"==selectedParentSchool){laSalleEligibleArr=[];for(let e=0;e<a.length;e++){if(minAge=a[e].values[37]?a[e].values[37][0].name:"",a[e].values[39]&&a[e].values[39].length>0)for(let t=0;t<a[e].values[39].length;t++)laSalleEligibleArr.push(a[e].values[39][t].id);programArray.push({parent_program_id:a[e].values[29][0].id,program_id:a[e].id,program_name:a[e].values[3],program_schedule:a[e].values[10],program_length:a[e].values[8],is_coop:a[e].values[9],min_age:minAge,max_age:"",laSalleEligible:laSalleEligibleArr.toString()})}let e=groupBy(programArray,"program_name"),t=new Object;t=e,values=Object.values(t),uniqueProgramArray=[];for(let e=0;e<values.length;e++)for(let a=0;a<values[e].length;a++)0==a&&uniqueProgramArray.push({program_id:values[e][a].parent_program_id,program_name:values[e][a].program_name,is_prola:0,min_age:values[e][a].min_age,max_age:values[e][a].max_age});printDropDownArray=uniqueProgramArray,localStorage.setItem(programObjGC,JSON.stringify(programArray))}else if("Language School"==selectedParentSchool||"ELS"==selectedParentSchool){for(let e=0;e<a.length;e++)minAge=void 0!==a[e].values[minAgeObjNum]?a[e].values[minAgeObjNum][0].name:"",maxAge=void 0!==a[e].values[maxAgeObjNum]?a[e].values[maxAgeObjNum][0].name:"",programArray.push({program_id:a[e].id,program_name:a[e].values[2],is_prola:a[e].values[10],min_age:minAge,max_age:maxAge});printDropDownArray=programArray}else{for(let e=0;e<a.length;e++)programArray.push({program_id:a[e].id,program_name:a[e].values[2],is_prola:!1,min_age:"",max_age:""});printDropDownArray=programArray}if($(".study-program-selection.study-box-container").removeClass("disabled"),printDropDownArray.length>0){optionHtml="<option disabled selected value=''>Choose Program</option>";for(let e=0;e<printDropDownArray.length;e++)optionValue=printDropDownArray[e].program_name,isProla=0!=printDropDownArray[e].is_prola,optionHtml=optionHtml+"<option data-id='"+printDropDownArray[e].program_id+"' value='"+optionValue+"' data-min-age='"+printDropDownArray[e].min_age+"' data-max-age='"+printDropDownArray[e].max_age+"'  data-prola='"+isProla+"' data-value='"+optionValue+"'>"+optionValue+"</option>";$("#study-program-"+n+" ."+t+" .study-program-dropdown select").html(optionHtml).attr("name","program_name_"+t+comboName).attr("id","program-name-"+t+comboName).addClass(t),$(dropContainerEl).removeClass("study-hide").addClass("study-show"),$(dropContainerEl+" select").attr("disabled",!1)}else $("#study-program-"+n+".study-program-selection.study-box-container .input-container.program-input."+t).removeClass("study-hide").addClass("study-show"),$(".study-program-dropdown select."+t+"[name=name=program_name"+comboName+"]").html('<option value="" selected disabled>No Programs available</option>')}))}},printCampus=function(e){let a=$(".study-information-form.dropdown-container button.country-select").attr("data-selected"),t="https://api.hubapi.com/hubdb/api/v2/tables/"+campusTable+"/rows?portalId="+portalId+("&enable__eq=1&country__in="+a+"&schools__in="+e);t=encodeURI(t),$.get(t).done((function(a){let t=a.objects;if(t.sort(((e,a)=>e.values[4]>a.values[4]?1:-1)),campusArray=[],t.length>0){for(let a=0;a<t.length;a++)initials=t[a].values[1].match(/\b(\w)/g),boxName=t[a].values[6]?"":initials.join("").toUpperCase(),thumbNail=t[a].values[6]?"style=background:url('"+t[a].values[6].url+"') no-repeat;":"",campusArray.push({id:t[a].id,initials:boxName,school:e,value:t[a].values[1],stateProv:t[a].values[4],thumbnail:thumbNail});let a=groupBy(campusArray,"stateProv"),o=new Object;o=a,groupHtml="",arr=Object.values(o),childArrayLength=arr.reduce(((e,a)=>e+a.length),0),groupAction=arr.length<childArrayLength;for(let e in o){title=e,listHtml="";for(let a=0;a<o[e].length;a++)o[e][a].length>1&&(multiList=!0),listHtml+='<li class="hs-form-radio campus-select-radio form-check"><label id="campus-select" for="'+o[e][a].id+'" class="box-selection"><div class="box-color" data-value="'+o[e][a].id+'" '+o[e][a].thumbnail+">"+o[e][a].initials+'</div><input type="radio" name="program_campus" data-state-prov="'+o[e][a].stateProv+'" data-school="'+o[e][a].school+'" value="'+o[e][a].value+'" id="'+o[e][a].id+'" required><span>'+o[e][a].value+"</span></label></li>";groupAction?groupHtml+="<div>"+listHtml+"<h5>"+title+"</h5></div>":groupHtml+=listHtml}$(".study-campus-selection.study-box-container").removeClass("disabled"),$(".study-campus-selection ul.inputs-list").html(groupHtml),$(".study-campus-selection.study-box-container .input-container").removeClass("study-hide").addClass("study-show")}}))},printSchoolSelection=function(){let e=$(".study-information-form.dropdown-container button.country-select").attr("data-selected"),a=schoolTypeListTable,t="ELS"==schoolVal?"&parent_school__in=ELS":"&parent_school__ne=ELS",o="https://api.hubapi.com/hubdb/api/v2/tables/"+a+"/rows?portalId="+portalId+(t+"&location_country__in="+e),r="";o=encodeURI(o),$.get(o).done((function(e){let a=e.objects;if(a.sort(((e,a)=>e.values[1]>a.values[1]?1:-1)),a.length>0){for(let e=0;e<a.length;e++)initials=a[e].values[3][0].name.match(/\b(\w)/g),boxName=a[e].values[6]?"":initials.join("").toUpperCase(),thumbNail=a[e].values[6]?"style=background:url('"+a[e].values[6].url+"') no-repeat;":"",r+='<li class="hs-form-radio school-select-radio form-check"><label id="school-select" for="'+a[e].id+'" class="box-selection"><div class="box-color center" data-value="'+a[e].id+'" '+thumbNail+">"+boxName+'</div><input type="radio" class="form-check-input" name="program_school" data-pairable="'+a[e].values[5]+'" value="'+a[e].values[1]+'" data-school="'+a[e].values[3][0].name+'" id="'+a[e].id+'" required><span>'+a[e].values[1]+"</span></label></li>";$(".study-school-selection.study-box-container").removeClass("disabled"),$(".study-school-selection ul.inputs-list").html(r),$(".study-school-selection.study-box-container .input-container").removeClass("study-hide").addClass("study-show")}}))},printProgramHubspotFileForm=function(){hbspt.forms.create({region:"na1",portalId:"5020112",formId:programUploadFormId,target:"#program-hs-file-form"})},printAdditionalInfo=function(){let e=$(".study-information-form.dropdown-container button.country-select").attr("data-selected"),a=$("input[name=program_school]:checked").attr("data-school"),t=$("input[name=program_school]:checked").val(),o=($("input[name=is_alternate_apply]:checked").val(),""),r="",n="true"==$("select[name=program_name_primary-input] option:selected").attr("data-prola")||"true"==$("select[name=program_name_alternate-input] option:selected").attr("data-prola");prolaHtml='<div class="form-group"><label for="inputProlaNumber">ILSC Academic Placement Test Number (if applicable)</label><input type="text" name="additional_prola_number" id="inputProlaNumber"><div class="valid-feedback"></div></div>',usiHtml='<div class="form-group"><label for="inputUsiNumber">USI Number<sup>*</sup></label><input type="text" name="additional_usi_number" id="inputUsiNumber"><div class="valid-feedback"></div></div>',visaRadioHtml='<label>Have you ever been refused a visa for any country including Australia?<sup>*</sup></label><div class="form-check"><input class="form-check-input" value="No" type="radio" name="additional_visa_refusal" id="visa-question-no" required><label class="form-check-label" for="visa-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="Yes" type="radio" name="additional_visa_refusal" id="visa-question-yes" required><label class="form-check-label" for="visa-question-yes">Yes</label></div>',visaFileHtml='<div class="form-group gte-file-input study-hide"><label for="gte-file">Upload Genuine Temporary Entrant - Statement of Purpose Copy (jpeg,png,pdf) (<a href="https://immi.homeaffairs.gov.au/visas/getting-a-visa/visa-listing/student-500/genuine-temporary-entrant#:~:text=%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8BAll,to%20apply%20for%20permanent%20residence" target="_blank">more info</a>)<br><span class="footnote">*Further documents might be required throughout the application process.</span></label><input type="file" name="program_gte_file_upload" id="gte-file" accept="jpeg,jpg,pdf,png" data-bind="gte_copy"><input type="hidden" name="program_gte_file_upload" value="" readonly><div class="valid-feedback"></div></div>',applyVisaHtml='<label>Applying student visa outside of Australia?<sup>*</sup></label><div class="form-check"><input class="form-check-input" value="0" type="radio" name="additional_visa_apply" id="visa-question-no" required><label class="form-check-label" for="visa-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="1" type="radio" name="additional_visa_apply" id="visa-question-yes" required><label class="form-check-label" for="visa-question-yes">Yes</label></div>',visaOptionUsHtml='<label>What Visa will you apply for?<sup>*</sup></label><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio0" value="F-1" required><label class="form-check-label" for="studentVisaOptionRadio0">F-1</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio1" value="F-2" required=""><label class="form-check-label" for="studentVisaOptionRadio1">F-2</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio2" value="B-1" required=""><label class="form-check-label" for="studentVisaOptionRadio2">B-1</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio3" value="B-2" required=""><label class="form-check-label" for="studentVisaOptionRadio3">B-2</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio4" value="J-1" required=""><label class="form-check-label" for="studentVisaOptionRadio4">J-1</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio5" value="J-2" required=""><label class="form-check-label" for="studentVisaOptionRadio5">J-2</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio6" value="ESTA" required=""><label class="form-check-label" for="studentVisaOptionRadio6">ESTA</label></div><div class="form-check" data-category="Student"><input class="form-check-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio7" value="Resident/Green Card" required=""><label class="form-check-label" for="studentVisaOptionRadio7">Resident/Green Card</label></div><div class="form-check" data-category="Student"><input class="form-check-input other-input" type="radio" name="student_visa_option" id="studentVisaOptionRadio8" value="Other" required=""><label class="form-check-label" for="studentVisaOptionRadio8">Other</label></div><input type="text" class="dependent-target study-hide" data-target="student_visa_option" name="student_visa_option_other_specified" placeholder="Specify Other"><div class="valid-feedback"></div>',visaRadioUsHtml='<label>Are you in possession of a valid US student visa and would like to transfer from another institution?<sup>*</sup></label><div class="form-check"><input class="form-check-input" value="No" type="radio" name="additional_visa_transfer_us" id="visa-transfer-question-no" required><label class="form-check-label" for="visa-transfer-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="Yes" type="radio" name="additional_visa_transfer_us" id="visa-transfer-question-yes" required><label class="form-check-label" for="visa-question-yes">Yes</label></div>',visaTransferInputUsHtml='<div class="form-group visa-transfer-input study-hide"><label for="visa-transfer">Name of the institution you are attending?</label><input type="text" name="additional_visa_transfer_name" id="visa-transfer" disabled><div class="valid-feedback"></div></div>',visaTransferAttendanceInputUsHtml='<div class="form-group visa-transfer-attendance-input study-hide"><label for="visa-transfer-attendance">What was your last date of attendance?</label><input type="date" name="another_institution_last_date_of_attendance" id="visa-transfer-attendance" disabled><div class="valid-feedback"></div></div>',visaFormRadioUsHtml='<label>Do you need a Form I-20 to apply for a student visa?<sup>*</sup><sup><i class="fas fa-info-circle" data-container="body" data-toggle="popover" data-placement="right" data-trigger="hover" data-content="ELS Language Centers is authorized to provide you with a Certificate of Eligibility (Form I-20), which must be presented when applying for a student (F-1)"></i></sup></label><div class="form-check"><input class="form-check-input" value="No" type="radio" name="additional_visa_form_us" id="visa-form-question-no" required><label class="form-check-label" for="visa-form-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="Yes" type="radio" name="additional_visa_form_us" id="visa-form-question-yes" required><label class="form-check-label" for="visa-question-yes">Yes</label></div>',visaFormAddDependentButtonHtml='<div class="form-group visa-form-input study-hide"><label for="add-visa-dependent">Please list and dependents who will travel with you to the US and require an F-2 visa. You must enter dependent\'s name the same way it appears on the passport, and use a space for any special characters.</label><div class="btn-container"><div id="add-visa-dependent" class="btn btn-orange-outline">Add Dependent</div></div><div class="dependents-container"></div></div>',collegeRadioUsHtml='<label>Do you plan on attending college or university?<sup>*</sup></label><div class="form-check"><input class="form-check-input" value="No" type="radio" name="additional_college_question_us" id="college-question-no" required><label class="form-check-label" for="college-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="Yes" type="radio" name="additional_college_question_us" id="college-question-yes" required><label class="form-check-label" for="college-question-yes">Yes</label></div>',collegeAcceptRadioUsHtml='<div class="form-group college-acceptance study-hide"><label>Have you already been accepted to a US institution?<sup>*</sup></label><div class="form-check"><input class="form-check-input" value="No" type="radio" name="additional_college_accept_question_us" id="college-accept-question-no" required disabled><label class="form-check-label" for="college-accept-question-no">No</label></div><div class="form-check"><input class="form-check-input" value="Yes" type="radio" name="additional_college_accept_question_us" id="college-accept-question-yes" required disabled><label class="form-check-label" for="college-accept-question-yes">Yes</label></div></div>',collegeInputUsHtml='<div class="form-group college-input study-hide"><label for="college-input">Please write the name of the US institution below</label><input type="text" name="additional_college_name" id="additional_college_name" disabled><div class="valid-feedback"></div></div>',additionalNotesHtml='<div class="form-group college-input study-show"><label for="additional-notes-input">Enter any additional notes regarding your program of study</label><textarea name="study_additional_information_and_notes" id="additional-notes-input" cols="50" rows="10"></textarea><div class="valid-feedback"></div></div>',additionalOnlineNotesHtml='<div class="form-group college-input study-show"><label for="additional-notes-input">Enter any additional notes regarding your program study</label><textarea name="study_additional_online_information_and_notes" id="additional-notes-input" cols="50" rows="10"></textarea><div class="valid-feedback"></div></div>',"Australia"==e?(o="Greystone College"==a?prolaHtml+usiHtml:prolaHtml,r=o+visaRadioHtml+visaFileHtml+applyVisaHtml+additionalNotesHtml,hbspt.forms.create({region:"na1",portalId:"5020112",formId:programUploadFormId,target:"#program-hs-file-form"})):"Canada"==e?(o="Greystone College"==a||n?prolaHtml:"",r=o+additionalNotesHtml):"USA"==e?"ELS Youth"!=t&&(r=visaFormRadioUsHtml+visaFormAddDependentButtonHtml+visaRadioUsHtml+visaTransferInputUsHtml+visaTransferAttendanceInputUsHtml+collegeRadioUsHtml+collegeAcceptRadioUsHtml+collegeInputUsHtml+additionalNotesHtml):"Online"==e&&(r=o+additionalOnlineNotesHtml),""!=r&&($(".additional-notes-container .additional-notes-input").html(r),$(".additional-notes-container").removeClass("study-hide").removeClass("disabled").addClass("study-show"))},uploadFile=function(e){emailVar=$("input[name=student_email]").val(),"additional-select"==e?(formName="additional-form",hsFormId=additionalUploadFormId,targetId="additional-hs-file-form",submitVar=!0):"study-program-select"==e?(formName="study-form",hsFormId=programUploadFormId,targetId="program-hs-file-form",submitVar=!0):"submit-select"==e&&(formName="submit-complete",hsFormId=contractUploadFormId,targetId="contract-hs-file-form ",submitVar=!0),submitVar="false"!=$("#"+formName).attr("data-submit"),submitVar||$("#"+formName+" input[type=file]").length>0&&($("#"+formName+" input[type=file]").each((function(){fileName=$(this).attr("name"),dataBind=$(this).attr("data-bind"),fileVar=$("input[name="+fileName+"]")[0].files,$("#"+targetId+" input[name="+dataBind+"]")[0].files=fileVar})),$("#"+targetId+" input[name=email]").val(emailVar))},updateStatusJson=function(){let e=$("input[name=online_applicant_status]:checked").val(),a=localStorage.getItem(formJsonName),t=JSON.parse(a);t.application_status=e,t.application_enabled=!0,localStorage.setItem(formJsonName,JSON.stringify(t))},submitForm=function(e){let a=$("input[name=student_email]").val();switch(e){case"student-info-select":guid=studentGuid,formName="form-student",formNameAgent="form-agent",formNameAdvisor="form-advisor",formStatus="form-status",arr=studentInfoArray;break;case"study-program-select":guid=studyGuid,formName="study-form",arr=programInfoArray,arrDependent=dependentInputArray,uploadFile("study-program-select");break;case"accommodation-select":guid=accommodationGuid,formName="accommodation-form",arr=accommodationInfoArray,arrAdditional=accommodationAdditionalArray;break;case"additional-select":guid=additionalGuid,arr=additionalInfoArray,arrFamily=familyMemberInfoArray,formName="additional-form",uploadFile("additional-select");break;case"submit-select":guid=completeGuid,formName="submit-complete",arr=completeInfoArray,uploadFile("submit-select");break}if("undefined"!=typeof formName){formTempArray=$("form#"+formName).serializeArray(),forSubmitStr=$("form#"+formName).attr("data-submit"),formSubmit="false"!=forSubmitStr;let t="https://api.hsforms.com/submissions/v3/integration/submit/"+portalId+"/"+guid,o=[];if(formFieldsArray=[],t=encodeURI(t),"undefined"!=typeof formNameAgent){formAgentTempArray=$("form#"+formNameAgent).serializeArray();for(let e=0;e<formAgentTempArray.length;e++)for(let a=0;a<arr.length;a++)formAgentTempArray[e].name==arr[a].inputName&&arr[a].objInputName&&o.push({objName:arr[a].objInputName,value:formAgentTempArray[e].value})}if("undefined"!=typeof formNameAdvisor){formAdvisorTempArray=$("form#"+formNameAdvisor).serializeArray();for(let e=0;e<formAdvisorTempArray.length;e++)for(let a=0;a<arr.length;a++)formAdvisorTempArray[e].name==arr[a].inputName&&arr[a].objInputName&&o.push({objName:arr[a].objInputName,value:formAdvisorTempArray[e].value})}if("undefined"!=typeof formStatus){formStatusTempArray=$("form#"+formStatus).serializeArray();for(let e=0;e<formStatusTempArray.length;e++)for(let a=0;a<arr.length;a++)formStatusTempArray[e].name==arr[a].inputName&&arr[a].objInputName&&o.push({objName:arr[a].objInputName,value:formStatusTempArray[e].value})}let r=[],n=[],i=[];for(let e=0;e<formTempArray.length;e++)if(formTempArray[e].name.includes("combo"))i.push({name:formTempArray[e].name,value:formTempArray[e].value});else for(let a=0;a<arr.length;a++)formTempArray[e].name==arr[a].inputName&&arr[a].objInputName&&"email"!=arr[a].objInputName&&(formTempArray[e].name.includes("program_is_coop_")?booleanVar=formTempArray[e].name.includes("program_is_coop_")?1==formTempArray[e].value?"Co-Op":0==formTempArray[e].value?"Academic":formTempArray[e].value:1==formTempArray[e].value?"Yes":0==formTempArray[e].value?"No":formTempArray[e].value:booleanVar=formTempArray[e].name.includes("duration")?parseInt(formTempArray[e].value.slice(0,2)):formTempArray[e].name.includes("insurance")?1==formTempArray[e].value?"Yes":"No":formTempArray[e].value,o.push({objName:arr[a].objInputName,value:booleanVar}));let l=[];if(i.length>0)for(let e=0;e<i.length;e++)splitName=i[e].name.split("_combo-"),booleanVar=i[e].name.includes("program_is_coop_")?1==i[e].value?"Co-Op":0==i[e].value?"Academic":i[e].value:1==i[e].value?"Yes":0==i[e].value?"No":i[e].value,iterateVal=splitName[1],l.push({iterate:iterateVal,name:splitName[0],value:booleanVar});if(l.length>0){groupedProgram=groupBy(l,"iterate"),groupProgramArray=new Object,groupProgramArray=groupedProgram,values=Object.values(groupProgramArray),prgmGroup="";for(let e=0;e<values.length;e++){addPrgmStr="";for(let a=0;a<values[e].length;a++)programNameStr=values[e][a].name.includes("primary")?values[e][a].name.substr(0,values[e][a].name.indexOf("_primary")):values[e][a].name.substr(0,values[e][a].name.indexOf("_alternate")),addPrgmStr=addPrgmStr+'\r\n"'+programNameStr.replace("_"," ").replace("__"," ")+'": "'+values[e][a].value+'"',addPrgmStr=values[e].length-1==a?addPrgmStr:addPrgmStr+",";prgmGroup=values.length-1==e?prgmGroup+"{"+addPrgmStr+"\r\n}\r\n":prgmGroup+"{"+addPrgmStr+"\r\n},\r\n"}formFieldsArray.push({objectTypeId:"0-1",name:"additional_programs",value:"[\r\n"+prgmGroup+"\r\n]"})}else"study-program-select"==e&&formFieldsArray.push({objectTypeId:"0-1",name:"additional_programs",value:"n/a"});if("undefined"!=typeof arrFamily){for(let e=0;e<formTempArray.length;e++)formTempArray[e].name.includes("additional_family")&&(booleanVar=1==formTempArray[e].value?"Yes":0==formTempArray[e].value?"No":formTempArray[e].value,splitName=formTempArray[e].name.split("_iterate_"),iterateVal=splitName[1],n.push({iterate:iterateVal,name:splitName[0],value:booleanVar}));if(n.length>0){groupedDependent=groupBy(n,"iterate"),groupArray=new Object,groupArray=groupedDependent,values=Object.values(groupArray),famGroup="";for(let e=0;e<values.length;e++){famStr="";for(let a=0;a<values[e].length;a++)famStr=famStr+'\r\n"'+values[e][a].name.replace("additional_family_","").replace("_"," ")+'": "'+values[e][a].value+'"',famStr=values[e].length-1==a?famStr:famStr+",";famGroup=values.length-1==e?famGroup+"{"+famStr+"\r\n}\r\n":famGroup+"{"+famStr+"\r\n},\r\n"}formFieldsArray.push({objectTypeId:"0-1",name:"family_members_traveling_with",value:"[\r\n"+famGroup+"\r\n]"})}else"additional-select"==e&&formFieldsArray.push({objectTypeId:"0-1",name:"family_members_traveling_with",value:"n/a"})}if("undefined"!=typeof arrDependent){for(let e=0;e<formTempArray.length;e++)formTempArray[e].name.includes("additional_dependent")&&(booleanVar=1==formTempArray[e].value?"Yes":0==formTempArray[e].value?"No":formTempArray[e].value,splitName=formTempArray[e].name.split("_iterate_"),iterateVal=splitName[1],r.push({iterate:iterateVal,name:splitName[0],value:booleanVar}));if(r.length>0){groupedDependent=groupBy(r,"iterate"),groupArray=new Object,groupArray=groupedDependent,values=Object.values(groupArray),depGroup="";for(let e=0;e<values.length;e++){depStr="";for(let a=0;a<values[e].length;a++)depStr=depStr+'\r\n"'+values[e][a].name.replace("additional_dependent_","").replace("_"," ")+'": "'+values[e][a].value+'"',depStr=values[e].length-1==a?depStr:depStr+",";depGroup=values.length-1==e?depGroup+"{"+depStr+"\r\n}\r\n":depGroup+"{"+depStr+"\r\n},\r\n"}formFieldsArray.push({objectTypeId:"0-1",name:"form_i_20_dependents",value:"[\r\n"+depGroup+"\r\n]"})}else"study-program-select"==e&&formFieldsArray.push({objectTypeId:"0-1",name:"form_i_20_dependents",value:"n/a"})}if("undefined"!=typeof arrAdditional){formAddArray=$("form#"+formName).serializeArray();for(let e=0;e<formAddArray.length;e++)for(let a=0;a<arrAdditional.length;a++)formAddArray[e].name==arrAdditional[a].inputName&&arrAdditional[a].objInputName&&o.push({objName:arrAdditional[a].objInputName,value:formAddArray[e].value})}formFieldsArray.push({objectTypeId:"0-1",name:"email",value:a});for(let e=0;e<o.length;e++)valueTemp=""==o[e].value?"n/a":o[e].value,formFieldsArray.push({objectTypeId:"0-1",name:o[e].objName,value:valueTemp});formFieldsArray;formSubmit||$("form#"+formName).attr("data-submit",!0)}};$(".applicant-status-boxes .box-color").click((function(){$(".applicant-status-boxes .box-color").removeClass("selected"),$(this).addClass("selected"),enableNextButton("form#form-status")}));const enableCountryBtn=function(){$(".country-dropdown ul.drop-country li.dropdown-item").click((function(){$(".country-dropdown ul.drop-country li.dropdown-item").removeClass("selected"),$(this).addClass("selected"),enableNextButton(".study-information-form")}))},skipAccommodations=function(e){$("form#accommodation-form").attr("data-submit",!1),$("#no-accomm-option").prop("checked",!0),$(".fixed-side-menu-list .menu-accommodation.step-4 ").hide(),$(".accommodation-info-box-container").hide(),updateAccommodationJson(),printAdditionalForm(),submitForm("accommodation-select"),$(".application-step-form-slide").slick("slickGoTo",e+2)},hideInsurance=function(){$(".insurance-container").addClass("study-hide").removeClass("study-show"),$(".fixed-side-menu-list .menu-additional.step-5 #step-insurance").hide(),$(".insurance-container #insurance-option-container .input-container input[name=insurance_option]").prop("disabled",!0).prop("required",!1),$(".insurance-container #insurance-option-container .input-container input.medical-date-picker").prop("disabled",!0)},showInsurance=function(){$(".insurance-container").addClass("study-show").removeClass("study-hide"),$(".fixed-side-menu-list .menu-additional.step-5 #step-insurance").show(),$(".insurance-container #insurance-option-container .input-container input[name=insurance_option]").prop("disabled",!1).prop("required",!0)};$(".section-application-form .step-container .btn.next").on("click",(function(){let e=$(this).attr("data-step"),a=$(this).attr("data-form"),t=$(this).attr("data-check");if(validVar=1==validateForm(e,a,t),validVar){if("study-program-select"==e){let e=$("input[name=program_school]:checked").val(),a=$("input[name=program_country]").val(),t=$(".application-step-form-slide").slick("slickCurrentSlide");"ELS Youth"==e?(skipAccommodations(t),printAirportTransfer("additional-form","Additional",!0),$(".additional-airport-transfer-details").removeClass("study-hide").addClass("study-show")):"Online"==a?(skipAccommodations(t),$(".insurance-container").addClass("study-hide").removeClass("study-show"),$(".fixed-side-menu-list .menu-additional.step-5 #step-insurance").hide(),$(".insurance-container #insurance-option-container .input-container input[name=insurance_option]").prop("disabled",!0).prop("required",!1),$(".insurance-container #insurance-option-container .input-container input.medical-date-picker").prop("disabled",!0)):($(".insurance-container").addClass("study-show").removeClass("study-hide"),$(".fixed-side-menu-list .menu-additional.step-5 #step-insurance").show(),$(".insurance-container #insurance-option-container .input-container input[name=insurance_option]").prop("disabled",!1).prop("required",!0),$(".additional-airport-transfer-details").removeClass("study-show").addClass("study-hide"),$(".fixed-side-menu-list .menu-accommodation.step-4 ").show(),$(".accommodation-info-box-container").show(),$(".application-step-form-slide").slick("slickNext"))}else $(".application-step-form-slide").slick("slickNext");window.scrollTo(0,0),$(this).closest(".step-container").attr("data-complete",!0).attr("data-init",!0)}})),$(document).on("click","ul.drop-country li",(function(){resetSchoolProgram()})),$(document).on("click",".school-select-radio .box-color",(function(){let e=$(this).attr("data-value");$(".school-select-radio .box-color").removeClass("selected"),$(this).addClass("selected"),resetSchoolProgram(),printCampus(e)})),$(document).on("click","input[name=student_dob], .campus-select-radio .box-color",(function(){$(this).is(":input")?selected=$(".campus-select-radio .box-color.selected").attr("data-value"):(selected=$(this).attr("data-value"),$(".campus-select-radio .box-color").removeClass("selected"),$(this).addClass("selected")),$(".study-program-selection .additional-input-container,.study-program-selection .input-container,.additional-notes-container").removeClass("study-show").addClass("study-hide"),$("input[name=program_is_coop_primary-input]").prop("checked",!1),$(".additional-notes-container .additional-notes-input").empty(),$("input[name=accommodation_type]").prop("checked",!1),$(".form-group.accommodation-details").removeClass("study-show").addClass("study-hide"),$(".form-group.accommodation-details input").attr("disabled",!0),$(".accommodation-homestay-details").removeClass("study-show").addClass("study-hide"),$(".accommodation-homestay-details input").attr("disabled",!0),printProgram(selected,"primary-input")})),$(document).on("change","select[name=student_nationality]",(function(){$(".additional-files-container").empty()}));const coopAction=function(e,a){let t=$("input[name=program_campus]:checked").val(),o=$(e).val(),r=$(e).attr("name");resetProgramFormField(a,"."+a+".schedule-input,."+a+".date-input",!1,r),printProgramDrop(t,o,a,r)},updatePrgStartDate=function(){$("option:selected",tEl).attr("data-id"),$("option:selected",tEl).attr("data-min-age"),$("option:selected",tEl).attr("data-max-age"),$("input[name=program_school]:checked").attr("data-school"),$("."+element+" input[name=program_is_coop_"+element+"]:checked").val()},programAction=function(e,a,t){let o=$(e).attr("name"),r=returnComboName(o),n=$("option:selected",e).attr("data-id"),i=$("option:selected",e).attr("data-min-age"),l=$("option:selected",e).attr("data-max-age"),s=$("input[name=program_school]:checked").attr("data-school"),d=$("."+a+" input[name=program_is_coop_"+a+r+"]:checked").val();if("Greystone College"==s||t){let e=localStorage.getItem(programObjGC),t=JSON.parse(e).filter((e=>e.parent_program_id==n&&e.is_coop==d));printScheduleOption(t,a,o)}else"Language School"==s?printProgramOption(n,a,i,l,o):printStartDates(n,a,i,l,o)},programOptionAction=function(e,a){let t=$("select.study-program-select option:selected").attr("data-id"),o=$("select.study-program-select  option:selected").attr("data-min-age"),r=$("select.study-program-select  option:selected").attr("data-max-age"),n=$(e).attr("name");printStartDates(t,a,o,r,n)},resetLaSalleOption=function(e){let a=returnComboVal(e);$("#study-program-"+a+" .partner-input."+element).removeClass("study-show").addClass("study-hide"),$("#study-program-"+a+" .partner-input."+element+" input").attr("disabled",!0)},scheduleAction=function(e,a){let t=$(e).attr("id"),o=$(e).attr("data-weeks"),r=$(e).attr("data-lasalle-eligible"),n=$(e).attr("name"),i=returnComboVal(n),l=returnComboName(n),s=$("input[name=program_campus]:checked").attr("id"),d=$(e).val(),p=$("#study-program-"+i+" ."+a+" input[name=program_is_coop_"+a+"]:checked").val(),m=localStorage.getItem(programObjGC),u=JSON.parse(m);programSelected=u.filter((e=>e.parent_program_id==t&&e.is_coop==p&&e.program_schedule==d)),selectedMinAge=$(".study-program-dropdown select."+a+" option:selected").attr("data-min-age"),selectedMaxAge=$(".study-program-dropdown select."+a+" option:selected").attr("data-max-age"),resetProgramFormField("."+a+".date-input",!1,!1,n),$("input[name=program_weeks_"+a+l).val(o).attr("disabled",!1),printStartDates(t,a,selectedMinAge,selectedMaxAge,n),r&&r.includes(s)?printLaSalleOption(a,n):resetLaSalleOption(a,n)},partnerOptionAction=function(e,a){"Yes"==$(e).val()?($("."+a+" .partner-info").removeClass("study-hide").addClass("study-show"),$("."+a+" .partner-info input").attr("disabled",!1)):($("."+a+" .partner-info").removeClass("study-show").addClass("study-hide"),$("."+a+" .partner-info input").attr("disabled",!0))},printProgramBox=function(e,a){let t=$("input[name=program_campus]:checked").attr("id"),o=$("input[name=program_school]").attr("data-school"),r=$("input[name=program_country]").val(),n="",i="study-hide";"Greystone College"==o&&(coopText="52464878081"==t?"Practicum":"Co-Op",academicHtml="52464878081"!=t?'<div class="form-check"><input class="form-check-input '+a+'" value="0" type="radio" name="program_is_coop_'+a+"_combo-"+e+'" id="no-coop" required><label class="form-check-label" for="no-coop">Academic</label></div>':"",coopHtml="Australia"!=r?'<div class="form-check"><input class="form-check-input '+a+'" value="1" type="radio" name="program_is_coop_'+a+"_combo-"+e+'" id="yes-coop"><label class="form-check-label" for="yes-coop">'+coopText+"</label></div>":"",n="<label>Choose Program Type</label>"+academicHtml+coopHtml,i="study-show");let l=`<div class="study-program-selection study-box-container program-multi-box col-md-6" id="study-program-${e}" data-program-iterate="${e}"><h3>+Choose Program<sup>*</sup></h3><i class="far fa-minus-square"></i><div class="additional-input-container ${a} ${i}"><div class="row"><div class="col-md-12"><div class="additional-program-form">${n}</div></div></div></div><div class="input-container study-hide program-input ${a}"><div class="row"><div class="col-md-12"><div class="study-program-dropdown"><select class="form-control study-program-select ${a}" id="program-name" name="program_name_combo-${e}" data-program-iterate="${e}" required><option disabled="disabled" selected="selected" value="">Choose Program</option></select></div></div></div></div><div class="input-container study-hide program-option-input ${a}"><div class="row"><div class="col-md-12"><div class="program-schedule-input"></div></div></div></div><div class="input-container study-hide schedule-input ${a}"><div class="row"><div class="col-md-6"><div class="time-input"></div></div><div class="col-md-6"><div class="week-input"></div><input type="hidden" name="program_weeks_${a}_combo-${e}" value="" data-program-iterate="${e}" disabled="disabled"></div></div></div><div class="input-container study-hide partner-input ${a}"><div class="row"><div class="col-md-12"><div class="partner-option-input"></div></div></div></div><div class="input-container study-hide date-input ${a}"><div class="row"><div class="col-md-12"><div class="study-program-start-date-dropdown"><label>Choose Start Date<sup>*</sup></label><select class="form-control startdate-dropdown ${a}" id="program-startdate-${a}" name="program_startdate_${a}_combo-${e}" data-program-iterate="${e}" disabled="disabled" required><option disabled="disabled" selected="selected" value="">Choose Start Date</option></select></div></div></div></div><div class="input-container study-hide program-option-duration-input ${a}"><div class="row"><div class="col-md-12"><div class="duration-dropdown"><label>Choose Duration<sup>*</sup></label><select class="form-control week-duration-dropdown ${a}" id="program-option-duration-${a}" name="program_option_duration_${a}_combo-${e}" data-program-iterate="${e}" disabled="disabled" required><option disabled="disabled" selected="selected" value="">Choose Duration</option></select></div></div></div></div></div>`;$("#study-program-container").append(l),resizeProgramMultiBox()},resizeProgramMultiBox=function(){$(".program-multi-box").each((function(e){let a=e==$(".program-multi-box").length-1;(e+1)%2==0?$(this).removeClass("col-md-12").addClass("col-md-6"):a?$(this).addClass("col-md-12").removeClass("col-md-6"):$(this).removeClass("col-md-12").addClass("col-md-6")}))},printAddProgramLink=function(e){0==$(e).find(".add-program-link").length&&$(e).append('<a class="add-program-link">+Add Another Program</a><span class="add-program-warning"></span>')};$(document).on("click",".program-multi-box .fa-minus-square",(function(){$(this).parent().remove(),$("form#study-form").attr("data-submit",!1),$(".program-multi-box").each((function(e){iterateVal=e+1,iterateAdd=iterateVal+1,iterateId="study-program-"+iterateAdd.toString(),$(this).attr("data-program-iterate",iterateVal+1),$(this).attr("id",iterateId),$("input,select",this).each((function(e){let a=$(this).attr("name").replace(/.$/,iterateAdd);$(this).attr("name",a),$(this).attr("data-program-iterate",iterateAdd)}))})),resizeProgramMultiBox(),$(".program-multi-box").length<5&&$("span.add-program-warning").empty()})),$(document).on("click","a.add-program-link",(function(){let e=0==$(".program-multi-box").length?2:$(".program-multi-box").length+2;$(this).parents().eq(3).hasClass("alternate-input")?(element="alternate-input",pairable=!0):(element="primary-input",pairable=!1),$(".program-multi-box").length<5?printProgramBox(e,element):$("span.add-program-warning").html("You have reached the maximum number of additional programs (5).")}));const startDateAction=function(e,a){let t=$("input[name=program_school]:checked").attr("data-pairable"),o=$("input[name=program_school]:checked").attr("data-school"),r=$(a).attr("name");"Language School"!=o&&"ELS"!=o||printProgramDuration(e,r),"Greystone College"==o&&printAddProgramLink($(a).parent()),1==t&&"alternate-input"!=e&&(optionHtml='<label>Are you also applying for Greystone College programs?</label><div class="form-check"><input class="form-check-input" value="0" type="radio" name="is_alternate_apply" id="no-alternate" required checked><label class="form-check-label" for="no-alternate">No</label></div><div class="form-check"><input class="form-check-input" value="1" type="radio" name="is_alternate_apply" id="yes-alternate"><label class="form-check-label" for="yes-alternate">Yes</label></div>',className=".study-program-selection .input-container.alternate-initial .study-program-alternate-option",$(className).is(":empty")&&$(className).html(optionHtml),$(".study-program-selection .input-container.alternate-initial").removeClass("study-hide").addClass("study-show")),printAdditionalInfo(),$((function(){let e=new Date(parseInt($("select[name=program_startdate_primary-input] option:checked").attr("data-value"))),a="ELS"==o?e.setDate(e.getDate()-e.getDay()):e.setDate(e.getDate()-3);"ELS"==o?$(".accommodation-checkin-date-picker,.accommodation-checkout-date-picker").attr("disabled",!1):$(".accommodation-checkin-date-picker").attr("disabled",!1),$(".accommodation-checkin-date-picker,.accommodation-checkout-date-picker").datepicker("setDate",null),$(".accommodation-checkin-date-picker,.accommodation-checkout-date-picker").datepicker("destroy"),$(".accommodation-checkin-date-picker,.accommodation-checkout-date-picker").datepicker({minDate:new Date(a),dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:function(e){dateObj=new Date(e),$(this).attr("data-value",dateObj.getTime()),$(this).hasClass("accommodation-checkin-date-picker")&&($(".accommodation-name-option").is(":empty")&&printAccommodationName(),calcAccomCheckOutDate())},beforeShowDay:function(e){return"ELS"==o||6==e.getDay()||0==e.getDay()?[!0]:[!1]}})}))},durationAction=function(e,a){let t=$(a).attr("name");if("primary-input"==e&&"1"==$("input[name=is_alternate_apply]:checked").val()&&!$(".alternate-input .study-program-start-date-dropdown").is(":empty")){let a=$("input[name=program_schedule_alternate-input]:checked").attr("id"),o=$(".study-program-dropdown select."+e+" option:selected").attr("data-min-age"),r=$(".study-program-dropdown select."+e+" option:selected").attr("data-max-age");printStartDates(a,"alternate-input",o,r,t)}let o=$("input[name=program_school]").val();"ELS"==o&&(startDate=parseInt($("select[name=program_startdate_primary-input] option:checked").attr("data-value")),primaryDurationInt=parseInt($("select[name=program_option_duration_primary-input] option:selected").val().slice(0,2)),primaryDuration=7*primaryDurationInt,endDate=startDate+864e5*primaryDuration,checkOutDateObj=new Date(endDate),checkOutDate=checkOutDateObj.setDate(checkOutDateObj.getDate()+3),$(".accommodation-checkout-date-picker").datepicker("destroy"),$(".accommodation-checkout-date-picker").datepicker({minDate:new Date(endDate),maxDate:new Date(checkOutDate),dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:function(e){dateObj=new Date(e),$(this).attr("data-value",dateObj.getTime())},beforeShowDay:function(e){return"ELS"==o||6==e.getDay()||0==e.getDay()?[!0]:[!1]}}))};$(document).on("change","select[name=student_address_country]",(function(){selected=$("option:selected",this).val(),"Australia"==selected?$("input[name=australia_visa_type_number]").attr("disabled",!1).parent().removeClass("study-hide").addClass("study-show"):$("input[name=australia_visa_type_number]").attr("disabled",!0).parent().removeClass("study-show").addClass("study-hide")})),$(document).on("click",'.primary-input input[name*="program_is_coop"],.alternate-input input[name*="program_is_coop"]',(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",coopAction(this,element)})),$(document).on("change","select.study-program-select",(function(){$(this).hasClass("alternate-input")?(element="alternate-input",pairable=!0):(element="primary-input",pairable=!1),programAction(this,element,pairable)})),$(document).on("change","input[name=program_country]",(function(){$("#insurance-option-container").empty()})),$(document).on("click",'.primary-input input[name*="program_option"]',(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",programOptionAction(this,element)})),$(document).on("click",'.primary-input input[name*="program_schedule"],.alternate-input input[name*="program_schedule"]',(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",scheduleAction(this,element)})),$(document).on("click",'.primary-input input[name*="option_lasalle_parthership"],.alternate-input input[name*="option_lasalle_parthership"]',(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",partnerOptionAction(this,element)})),$(document).on("change",".primary-input .study-program-start-date-dropdown select.primary-input,.alternate-input .study-program-start-date-dropdown select.alternate-input",(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",startDateAction(element,this)})),$(document).on("change",'.primary-input select[name*="program_option_duration"]',(function(){$(this).hasClass("alternate-input")?element="alternate-input":element="primary-input",durationAction(element,this)})),$(document).on("click",".alternate-input input[name=is_alternate_apply]",(function(){let e=$(this).val(),a=$("input[name=program_campus]:checked").val();1==e?(printProgram(a,"alternate-input",!0),$(".study-program-alternate input,.study-program-alternate select").attr("disabled",!1)):($(".alternate-initial input[name=program_school_alternate-input]").remove(),$(".study-program-alternate").removeClass("study-show").addClass("study-hide"),$(".study-program-alternate input,.study-program-alternate select").attr("disabled",!0))})),$(document).on("click","input[name=additional_visa_refusal]",(function(){"Yes"==$(this).val()?($(".gte-file-input").removeClass("study-hide").addClass("study-show"),$(".gte-file-input input").attr("required",!0)):($(".gte-file-input").removeClass("study-show").addClass("study-hide"),$(".gte-file-input input").attr("required",!1))})),$(document).on("click","input[name=additional_visa_transfer_us]",(function(){"Yes"==$(this).val()?($(".visa-transfer-input,.visa-transfer-attendance-input").removeClass("study-hide").addClass("study-show"),$(".visa-transfer-input input,.visa-transfer-attendance-input input").attr("required",!0).attr("disabled",!1)):($(".visa-transfer-input,.visa-transfer-attendance-input").removeClass("study-show").addClass("study-hide"),$(".visa-transfer-input input,.visa-transfer-attendance-input input").attr("required",!1).attr("disabled",!0))})),$(document).on("click","input[name=additional_visa_form_us]",(function(){"Yes"==$(this).val()?($(".visa-form-input").removeClass("study-hide").addClass("study-show"),$(".visa-form-input input").attr("required",!0).attr("disabled",!1)):($(".visa-form-input").removeClass("study-show").addClass("study-hide"),$(".visa-form-input input").attr("required",!1).attr("disabled",!0))})),$(document).on("click","input[name=additional_college_question_us]",(function(){"Yes"==$(this).val()?($(".college-acceptance").removeClass("study-hide").addClass("study-show"),$(".college-acceptance input").attr("required",!0).attr("disabled",!1)):($(".college-acceptance").removeClass("study-show").addClass("study-hide"),$(".college-acceptance input").attr("required",!1).attr("disabled",!0))})),$(document).on("click","input[name=additional_college_accept_question_us]",(function(){"Yes"==$(this).val()?($(".college-input").removeClass("study-hide").addClass("study-show"),$(".college-input input").attr("required",!0).attr("disabled",!1)):($(".college-input").removeClass("study-show").addClass("study-hide"),$(".college-input input").attr("required",!1).attr("disabled",!0))})),$(document).on("click","#add-visa-dependent",(function(){dValue=$(".dependents-container >div").length+1,dClass="dependent-person-"+dValue,dValue<4&&($(".dependents-container").append('<div class="'+dClass+' d-class"><i class="far fa-minus-square"></i><h4>Dependent #<span class="int-d-val">'+dValue+"</span></h4>"),printPersonForm(dependentInputArray,!1,"Dependent",dClass,dValue))})),$(document).on("click",".dependents-container .d-class i.fa-minus-square",(function(){$(this).parent().remove(),$("form#study-form").attr("data-submit",!1),$(".dependents-container >div").each((function(e){dValueNew=e+1,dClass="dependent-person-"+dValueNew,$(this).removeClass().addClass(dClass).addClass("d-class"),$("span.int-d-val",this).html(dValueNew)}))})),$(document).on("mouseenter",'i[data-toggle="popover"]',(function(){$(this).popover({trigger:"hover",html:!0}).popover("show")})),$(document).on("change","input[name=online_applicant_status]",(function(){statusName=$(this).val(),"Student"==statusName?($("select[name=student_preferred_language]").parent().removeClass("study-hide").addClass("study-show"),$("select[name=student_preferred_language]").prop("disabled",!1)):($("select[name=student_preferred_language]").parent().removeClass("study-show").addClass("study-hide"),$("select[name=student_preferred_language]").prop("disabled",!0))}));const applicationFormSlider=function(){$(".application-step-form-slide").slick({accessibility:!1,arrows:!1,dots:!1,draggable:!1,infinite:!1,speed:500,fade:!0,cssEase:"linear",slidesToShow:1,slidesToScroll:1,adaptiveHeight:!1,swipe:!1,touchMove:!1})};$(document).ready((function(){$(".application-step-form-slide").slick({accessibility:!1,arrows:!1,dots:!1,draggable:!1,infinite:!1,speed:500,fade:!0,cssEase:"linear",slidesToShow:1,slidesToScroll:1,adaptiveHeight:!1,swipe:!1,touchMove:!1})}));